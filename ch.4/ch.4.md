# 第 4 章 构筑测试体系

## 4.1 自测试代码的价值

类应该包含它们自己的测试代码

确保所有测试都完全自动化，让它们检查自己的测试结果。

测试驱动开发（Test-Driven Development，TDD）

如果你想重构，就必须编写测试。

不同开发者在 `describe` 和 `it` 块里撰写的描述信息各有不同。有的人会写一个描述性的句子解释测试的内容，也有人什么都不写，认为所谓描述性的句子跟注释一样，不外乎是重复代码已经表达的东西。我个人不喜欢多写，只要测试失败时足以识别出对应的测试就够了。

## 4.2 待测试的示例代码

## 4.3 第一个测试

## 4.4 再添加一个测试

编写未臻完善的测试并经常运行，好过对完美测试的无尽等待。

## 4.5 修改测试夹具

## 4.6 探测边界条件

Mocha 把这也当作测试失败（failure），但多数测试框架会把它当作一个错误（error），并与正常的测试失败区分开。“失败”指的是在验证阶段中，实际值与验证语句提供的期望值不相等；而这里的“错误”则是另一码事，它是在更早的阶段前抛出的异常（这里是在配置阶段）。

## 4.7 测试远不止如此

测试也是一种迭代式的活动。

每当你收到 bug 报告，请先写一个单元测试来暴露这个 bug。

不过尽管过度测试时有发生，相比测试不足的情况还是稀少得多。
